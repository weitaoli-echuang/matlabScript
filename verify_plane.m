clear all;
clc;

% MV=[
%     1.0000000000000000	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     1.0000000000000000	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     1.0000000000000000	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     -1.0000000000000000	,
%     1.0000000000000000
%     ];
% P=[
%     1.7320508075688774	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     1.7320508075688774	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     -1.0002000200020003	,
%     -1.0000000000000000	,
%     0.00000000000000000	,
%     0.00000000000000000	,
%     -0.20002000200020004	,
%     0.00000000000000000
%     ];
% MV=reshape(MV,4,4);
% P=reshape(P,4,4);
% MVP=MV*P;
% MVinv=inv(MV);
% Pinv=inv(P);
% MVinvP=MVinv*P;
% 
% 
% f=MVP(:,3)+MVP(:,4);
% f=f/f(3,1);
% n=-MVP(:,3)+MVP(:,4);
% n=n/n(3,1);
% 
% 
% f=MVinvP(:,3)+MVinvP(:,4);
% f=f/f(3,1);
% n=-MVinvP(:,3)+MVinvP(:,4);
% n=n/n(3,1);
% 
% PMV=P*MV;
% f=PMV(:,3)+PMV(:,4);
% f=f/f(3,1);
% n=-PMV(:,3)+PMV(:,4);
% n=n/n(3,1);
% 
% PMVinv=P*MVinv;
% f=PMVinv(:,3)+PMVinv(:,4);
% f=f/f(3,1);
% n=-PMVinv(:,3)+PMVinv(:,4);
% n=n/n(3,1);
% 
% MVPinv=MVinv*Pinv;
% f=MVPinv(:,3)+MVPinv(:,4);
% f=f/f(3,1);
% n=-MVPinv(:,3)+MVPinv(:,4);
% n=n/n(3,1);

MVr=[
    1.00000000,
    0.000000000,
    -0.000000000,
    0.000000000,
    -0.000000000,
    1.00000000,
    -0.000000000,
    0.000000000,
    0.000000000,
    0.000000000,
    1.00000000,
    0.000000000,
    -0.000000000,
    -0.000000000,
    -1.60000002,
    1.00000000
    ];

MV=[
    1.00000000	,
    0.000000000	,
    0.000000000	,
    0.000000000	,
    0.000000000	,
    1.00000000	,
    0.000000000	,
    0.000000000	,
    0.000000000	,
    0.000000000	,
    1.00000000	,
    0.000000000	,
    0.000000000	,
    0.000000000	,
    -1.60000002	,
    1.00000000
    ];

assert_mv=MV-MVr;

P=[
2.14450693	,
0.000000000	,
0.000000000	,
0.000000000	,
0.000000000	,
2.14450693	,
0.000000000	,
0.000000000	,
0.000000000	,
0.000000000	,
-1.00002003	,
-1.00000000	,
0.000000000	,
0.000000000	,
-0.0200002007	,
0.000000000	
    ];

MV=reshape(MV,4,4);
P=reshape(P,4,4);
MVP=MV*P;
PMV=P*MV;


MVPr=[2.14450693,
0.000000000,
0.000000000,
0.000000000,
0.000000000,
2.14450693,
0.000000000,
0.000000000,
0.000000000,
0.000000000,
-1.00002003,
-1.00000000,
0.000000000,
0.000000000,
1.58003187,
1.60000002
    ];
MVPr=reshape(MVPr,4,4);
assert_r=MVPr-P*MV;

MVPr=MVPr';

r=-MVPr(:,1)+MVPr(:,4);
l=MVPr(:,1)+MVPr(:,4);
t=-MVPr(:,2)+MVPr(:,4);
b=MVPr(:,2)+MVPr(:,4);
n=-MVPr(:,3)+MVPr(:,4);
f=MVPr(:,3)+MVPr(:,4);

PP=[
    2.1445069205095586,
0.00000000000000000,
0.00000000000000000,
0.00000000000000000,
0.00000000000000000,
2.1445069205095586,
0.00000000000000000,
0.00000000000000000,
0.00000000000000000,
0.00000000000000000,
-1.0002000200020003,
-0.20002000200020004,
0.00000000000000000,
0.00000000000000000,
-1.0000000000000000,
0.00000000000000000
];

MVV=[1.0000000000000000,
0.00000000000000000,
0.00000000000000000,
0.00000000000000000,
0.00000000000000000,
1.0000000000000000,
0.00000000000000000,
0.00000000000000000,
0.00000000000000000,
0.00000000000000000,
1.0000000000000000,
-1.6000000000000001,
0.00000000000000000,
0.00000000000000000,
0.00000000000000000,
1.0000000000000000
];

PP=reshape(PP,4,4)';
MVV=reshape(MVV,4,4)';
PPMVV=PP*MVV;





